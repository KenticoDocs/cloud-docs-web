!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("KontentSmartLink",[],t):"object"==typeof exports?exports.KontentSmartLink=t():e.KontentSmartLink=t()}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/index.ts")}({"./src/index.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/plugin.ts");Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.default}});var i=n("./src/utils/link.ts");Object.defineProperty(t,"buildKontentLink",{enumerable:!0,get:function(){return i.buildKontentLink}}),Object.defineProperty(t,"buildElementLink",{enumerable:!0,get:function(){return i.buildElementLink}}),Object.defineProperty(t,"buildComponentElementLink",{enumerable:!0,get:function(){return i.buildComponentElementLink}})},"./src/lib/EventManager.ts":function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0}),t.EventManager=void 0;var o=function(){return function(){var e=this;this.listeners=new Map,this.on=function(t,n){var r,i,o=null!==(i=null===(r=e.listeners.get(t))||void 0===r?void 0:r.add(n))&&void 0!==i?i:new Set([n]);e.listeners.set(t,o)},this.off=function(t,n){var r;null===(r=e.listeners.get(t))||void 0===r||r.delete(n)},this.emit=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=e.listeners.get(t);o&&o.size>0&&o.forEach(function(e){e.apply(void 0,i(n))})},this.removeAllListeners=function(){e.listeners=new Map}}}();t.EventManager=o},"./src/lib/HighlightRenderer.ts":function(e,t,n){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.HighlightRenderer=t.HighlighterElementTag=t.HighlighterContainerTag=void 0;var o=n("./src/utils/node.ts");t.HighlighterContainerTag="KONTENT-SMART-LINK-OVERLAY",t.HighlighterElementTag="KONTENT-SMART-LINK-ELEMENT";var a=function(){function e(){var n=this;this.destroy=function(){n.clear(),n.defaultContainer.remove()},this.selectNode=function(e){var t=n.highlightByNode.get(e);t&&(e.classList.add("kontent-smart-link__node--selected"),t.classList.add("selected"))},this.deselectNode=function(e){var t=n.highlightByNode.get(e);t&&(e.classList.remove("kontent-smart-link__node--selected"),t.classList.remove("selected"))},this.render=function(e){var t,a,l,s,d,u,c;if(0===e.size)n.clear();else{var m=new Map;try{for(var f=r(e),v=f.next();!v.done;v=f.next()){var h=(x=v.value).getBoundingClientRect();if(!(0===h.height||0===h.width)){var g=i(o.getParentForHighlight(x),2),y=g[0],p=g[1],b=null!==(c=n.highlightByNode.get(x))&&void 0!==c?c:n.createHighlight(y);if(y&&p){var E=y.getBoundingClientRect();if((N=n.containerByParent.get(y))&&!p.isPositioned){var w=i(o.getTotalScrollOffset(y),2),C=w[0],L=w[1];N.style.height=y.clientHeight+"px",N.style.width=y.clientWidth+"px",N.style.top=y.offsetTop-C+"px",N.style.left=y.offsetLeft-L+"px",p.isContentClipped&&N.classList.add("kontent-smart-link-overlay--restricted")}var P=p.isPositioned&&p.isContentClipped,k=P?y.scrollTop:0,I=P?y.scrollLeft:0;b.style.top=h.top-E.top+k+"px",b.style.left=h.left-E.left+I+"px"}else b.style.top=h.top+window.pageYOffset+"px",b.style.left=h.left+window.pageXOffset+"px";b.style.width=h.width+"px",b.style.height=h.height+"px",m.set(x,b),n.highlightByNode.delete(x)}}}catch(e){t={error:e}}finally{try{v&&!v.done&&(a=f.return)&&a.call(f)}finally{if(t)throw t.error}}try{for(var T=r(n.highlightByNode.entries()),M=T.next();!M.done;M=T.next()){var S=i(M.value,2),x=S[0];(b=S[1]).remove(),n.highlightByNode.delete(x)}}catch(e){l={error:e}}finally{try{M&&!M.done&&(s=T.return)&&s.call(T)}finally{if(l)throw l.error}}try{for(var O=r(n.containerByParent.entries()),_=O.next();!_.done;_=O.next()){var N,j=i(_.value,2),A=j[0];0===(N=j[1]).children.length&&(N.remove(),n.containerByParent.delete(A))}}catch(e){d={error:e}}finally{try{_&&!_.done&&(u=O.return)&&u.call(O)}finally{if(d)throw d.error}}n.highlightByNode=m}},this.clear=function(){var e,t,o,a;try{for(var l=r(n.highlightByNode.entries()),s=l.next();!s.done;s=l.next()){var d=i(s.value,2),u=d[0];d[1].remove(),n.highlightByNode.delete(u)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}try{for(var c=r(n.containerByParent.entries()),m=c.next();!m.done;m=c.next()){var f=i(m.value,2),v=f[0];f[1].remove(),n.containerByParent.delete(v)}}catch(e){o={error:e}}finally{try{m&&!m.done&&(a=c.return)&&a.call(c)}finally{if(o)throw o.error}}n.highlightByNode=new Map,n.containerByParent=new Map,n.defaultContainer.innerHTML=""},this.createHighlight=function(e){var r=document.createElement(t.HighlighterElementTag);return n.createContainerIfNotExist(e).appendChild(r),r},this.createContainerIfNotExist=function(e){if(!e)return n.defaultContainer;if(n.containerByParent.has(e))return n.containerByParent.get(e);var r=document.createElement(t.HighlighterContainerTag);return e.appendChild(r),n.containerByParent.set(e,r),r},this.containerByParent=new Map,this.highlightByNode=new Map,this.defaultContainer=e.createDefaultContainer()}return e.createDefaultContainer=function(){var e=document.createElement(t.HighlighterContainerTag);return e.classList.add("kontent-smart-link-default-overlay"),window.document.body.appendChild(e),e},e}();t.HighlightRenderer=a},"./src/lib/IFrameCommunicator.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IFrameCommunicator=t.IFrameMessageType=void 0;var r=n("./src/utils/iframe.ts"),i=n("./src/lib/EventManager.ts");!function(e){e.ElementClicked="kontent-smart-link:element:clicked",e.Initialized="kontent-smart-link:initialized",e.Status="kontent-smart-link:status"}(t.IFrameMessageType||(t.IFrameMessageType={}));var o=function(){function e(){var e=this;this.addMessageListener=function(t,n){e.events.on(t,n)},this.removeMessageListener=function(t,n){e.events.off(t,n)},this.sendMessage=function(e,t,n){if(r.isInsideIFrame()){var i={type:e,data:t,metadata:n};window.parent.postMessage(i,"*")}else console.error("Warning: can't send an iframe message, because the application is not hosted in an iframe")},this.onMessage=function(t){if(t.data){var n=t.data;e.events.emit(n.type,n.data)}},this.events=new i.EventManager,window.addEventListener("message",this.onMessage,!0)}return e.prototype.destroy=function(){this.events.removeAllListeners(),window.removeEventListener("message",this.onMessage,!0)},e}();t.IFrameCommunicator=o},"./src/lib/NodeSmartLinkProvider.ts":function(e,t,n){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.NodeSmartLinkProvider=t.NodeSmartLinkProviderEventType=void 0;var i,o=n("./src/utils/dataAttributes.ts"),a=n("./src/lib/EventManager.ts"),l=n("./src/lib/HighlightRenderer.ts"),s=n("./src/utils/assert.ts");!function(e){e.ElementClicked="kontent-smart-link:element:clicked"}(i=t.NodeSmartLinkProviderEventType||(t.NodeSmartLinkProviderEventType={}));var d=function(){return function(){var e=this;this.enabled=!1,this.renderingTimeoutId=0,this.observedElements=new Set,this.visibleElements=new Set,this.destroy=function(){e.disable(),e.renderer.destroy()},this.addEventListener=function(t,n){e.events.on(t,n)},this.removeEventListener=function(t,n){e.events.off(t,n)},this.enable=function(){e.enabled||(e.startRenderingInterval(),e.listenToGlobalEvents(),e.observeDomMutations(),e.enabled=!0)},this.disable=function(){e.enabled&&(e.stopRenderingInterval(),e.unlistenToGlobalEvents(),e.disconnectObservers(),e.renderer.clear(),e.enabled=!1)},this.highlightVisibleElements=function(){requestAnimationFrame(function(){e.renderer.render(e.visibleElements)})},this.startRenderingInterval=function(){e.highlightVisibleElements(),e.renderingTimeoutId=window.setTimeout(e.startRenderingInterval,1e3)},this.stopRenderingInterval=function(){e.renderingTimeoutId&&(clearTimeout(e.renderingTimeoutId),e.renderingTimeoutId=0)},this.listenToGlobalEvents=function(){window.addEventListener("scroll",e.highlightVisibleElements,{capture:!0}),window.addEventListener("resize",e.highlightVisibleElements,{passive:!0}),window.addEventListener("animationend",e.highlightVisibleElements,{passive:!0,capture:!0}),window.addEventListener("transitionend",e.highlightVisibleElements,{passive:!0,capture:!0}),window.addEventListener("click",e.onElementClick,{capture:!0})},this.unlistenToGlobalEvents=function(){window.removeEventListener("scroll",e.highlightVisibleElements,{capture:!0}),window.removeEventListener("resize",e.highlightVisibleElements),window.removeEventListener("animationend",e.highlightVisibleElements,{capture:!0}),window.removeEventListener("transitionend",e.highlightVisibleElements,{capture:!0}),window.removeEventListener("click",e.onElementClick,{capture:!0})},this.observeDomMutations=function(){e.enabled||(e.mutationObserver.observe(window.document.body,{childList:!0,subtree:!0}),document.querySelectorAll("*["+o.DataAttribute.ElementCodename+"]").forEach(function(t){t instanceof HTMLElement&&e.observeElementVisibility(t)}))},this.disconnectObservers=function(){e.mutationObserver.disconnect(),e.intersectionObserver.disconnect(),e.observedElements.forEach(function(t){e.unobserveElementVisibility(t)}),e.observedElements=new Set,e.visibleElements=new Set},this.observeElementVisibility=function(t){e.observedElements.has(t)||(e.intersectionObserver.observe(t),e.observedElements.add(t),t.addEventListener("mousemove",e.onElementMouseEnter),t.addEventListener("mouseleave",e.onElementMouseLeave))},this.unobserveElementVisibility=function(t){e.observedElements.has(t)&&(e.intersectionObserver.unobserve(t),e.observedElements.delete(t),e.visibleElements.delete(t),t.removeEventListener("mousemove",e.onElementMouseEnter),t.removeEventListener("mouseleave",e.onElementMouseLeave))},this.onDomMutation=function(t){var n,i,a,s,d,u,c,m,f,v,h=o.dataToDatasetAttributeName(o.DataAttribute.ElementCodename),g=t.filter(function(e){var t="childList"===e.type,n=e.target instanceof Element&&![l.HighlighterElementTag,l.HighlighterContainerTag].includes(e.target.tagName);if(!t||!n)return!1;var r=Array.from(e.addedNodes).some(function(e){return e.tagName!==l.HighlighterElementTag}),i=Array.from(e.removedNodes).some(function(e){return e.tagName!==l.HighlighterElementTag});return r||i});try{for(var y=r(g),p=y.next();!p.done;p=y.next()){var b=p.value;try{for(var E=(a=void 0,r(b.addedNodes)),w=E.next();!w.done;w=E.next())if((I=w.value)instanceof HTMLElement){I.dataset[h]&&e.observeElementVisibility(I);try{for(var C=(d=void 0,r(I.querySelectorAll("*["+o.DataAttribute.ElementCodename+"]"))),L=C.next();!L.done;L=C.next())(S=L.value)instanceof HTMLElement&&e.observeElementVisibility(S)}catch(e){d={error:e}}finally{try{L&&!L.done&&(u=C.return)&&u.call(C)}finally{if(d)throw d.error}}}}catch(e){a={error:e}}finally{try{w&&!w.done&&(s=E.return)&&s.call(E)}finally{if(a)throw a.error}}try{for(var P=(c=void 0,r(b.removedNodes)),k=P.next();!k.done;k=P.next()){var I;if((I=k.value)instanceof HTMLElement){I.dataset[h]&&e.unobserveElementVisibility(I);try{for(var T=(f=void 0,r(I.querySelectorAll("*["+o.DataAttribute.ElementCodename+"]"))),M=T.next();!M.done;M=T.next()){var S;(S=M.value)instanceof HTMLElement&&e.unobserveElementVisibility(S)}}catch(e){f={error:e}}finally{try{M&&!M.done&&(v=T.return)&&v.call(T)}finally{if(f)throw f.error}}}}}catch(e){c={error:e}}finally{try{k&&!k.done&&(m=P.return)&&m.call(P)}finally{if(c)throw c.error}}}}catch(e){n={error:e}}finally{try{p&&!p.done&&(i=y.return)&&i.call(y)}finally{if(n)throw n.error}}g.length>0&&e.highlightVisibleElements()},this.onElementVisibilityChange=function(t){var n,i,o=t.filter(function(e){return e.target instanceof HTMLElement});try{for(var a=r(o),l=a.next();!l.done;l=a.next()){var s=l.value,d=s.target;s.isIntersecting?e.visibleElements.add(d):e.visibleElements.delete(d)}}catch(e){n={error:e}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}o.length>0&&e.highlightVisibleElements()},this.onElementClick=function(t){var n=o.getDataAttributesFromEventPath(t);if(n.has(o.DataAttribute.ElementCodename)){t.preventDefault();var r={projectId:n.get(o.DataAttribute.ProjectId),languageCodename:n.get(o.DataAttribute.LanguageCodename),itemId:n.get(o.DataAttribute.ItemId),contentComponentId:n.get(o.DataAttribute.ComponentId),elementCodename:n.get(o.DataAttribute.ElementCodename)},a=o.getHighlightedElementFromEventPath(t);s.assert(a,"Highlighted element is not found in the event path.");var l={elementRect:a.getBoundingClientRect()};e.events.emit(i.ElementClicked,r,l)}},this.onElementMouseEnter=function(t){var n=t.currentTarget;e.renderer.selectNode(n)},this.onElementMouseLeave=function(t){var n=t.currentTarget;e.renderer.deselectNode(n)},this.mutationObserver=new MutationObserver(this.onDomMutation),this.intersectionObserver=new IntersectionObserver(this.onElementVisibilityChange),this.events=new a.EventManager,this.renderer=new l.HighlightRenderer}}();t.NodeSmartLinkProvider=d},"./src/plugin.ts":function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n("./src/utils/iframe.ts"),o=n("./src/utils/link.ts"),a=n("./src/lib/IFrameCommunicator.ts"),l=n("./src/lib/NodeSmartLinkProvider.ts"),s=n("./src/utils/storage.ts"),d=n("./src/utils/validation.ts"),u=n("./src/utils/query.ts"),c={queryTimerId:0},m={languageCodename:null,projectId:null,queryParam:"kontent-smart-link-enabled"},f=function(){return function(e){var t=this;this.destroy=function(){var e;t.unwatchQueryParams(),t.nodeSmartLinkProvider.destroy(),null===(e=t.iFrameCommunicator)||void 0===e||e.destroy()},this.updateConfiguration=function(e){t.configuration=r(r({},t.configuration),e)},this.updateState=function(e){t.state=r(r({},t.state),e)},this.initializeIFrameCommunication=function(){if(!i.isInsideIFrame()||t.iFrameCommunicator)throw new Error("Cannot initialize iframe communication while not inside the iframe.");t.iFrameCommunicator=new a.IFrameCommunicator;var e=s.createStorage("kontent-smart-link:iframe-settings"),n=e.get(),r=null===n||(null===n||void 0===n?void 0:n.enabled);r&&t.nodeSmartLinkProvider.enable(),t.iFrameCommunicator.addMessageListener(a.IFrameMessageType.Status,function(n){n&&t.nodeSmartLinkProvider&&(t.toggleNodeSmartLinkProvider(n.enabled),e.set({enabled:n.enabled}))}),t.iFrameCommunicator.sendMessage(a.IFrameMessageType.Initialized,{projectId:t.configuration.projectId,languageCodename:t.configuration.languageCodename,enabled:r})},this.watchQueryParams=function(){if(i.isInsideIFrame())throw new Error("No need to watch query params inside the iframe.");t.state.queryTimerId&&clearTimeout(t.state.queryTimerId);var e=u.isQueryParamPresent(t.configuration.queryParam);t.nodeSmartLinkProvider.enabled!==e&&t.toggleNodeSmartLinkProvider(e),t.updateState({queryTimerId:window.setTimeout(t.watchQueryParams,1e3)})},this.unwatchQueryParams=function(){clearTimeout(t.state.queryTimerId)},this.listenToHighlighterEvents=function(){t.nodeSmartLinkProvider.addEventListener(l.NodeSmartLinkProviderEventType.ElementClicked,t.onElementClick)},this.onElementClick=function(e,n){var l=r(r({},e),{projectId:e.projectId||t.configuration.projectId||void 0,languageCodename:e.languageCodename||t.configuration.languageCodename||void 0});if(d.validateElementClickMessageData(l))if(i.isInsideIFrame()&&t.iFrameCommunicator)t.iFrameCommunicator.sendMessage(a.IFrameMessageType.ElementClicked,l,n);else{var s=o.buildKontentLink(l);window.open(s,"_blank")}},this.toggleNodeSmartLinkProvider=function(e){(void 0!==e?e:!t.nodeSmartLinkProvider.enabled)?t.nodeSmartLinkProvider.enable():t.nodeSmartLinkProvider.disable()},this.nodeSmartLinkProvider=new l.NodeSmartLinkProvider,this.state=c,this.configuration=r(r({},m),e),i.isInsideIFrame()?this.initializeIFrameCommunication():this.watchQueryParams(),this.listenToHighlighterEvents()}}(),v=function(){function e(){var e=this;this.plugin=null,this.destroy=function(){var t;null===(t=e.plugin)||void 0===t||t.destroy(),e.plugin=null},this.setConfiguration=function(t){if(!e.plugin)throw new Error("KontentSmartLink is not initialized or has already been destroyed.");e.plugin.updateConfiguration(t)}}return e.initializeOnLoad=function(t){return new Promise(function(n){window.addEventListener("load",function(){n(e.initialize(t))})})},e.initialize=function(t){return e.instance||(e.instance=new e),e.instance.plugin||(e.instance.plugin=new f(t)),e.instance},e}();t.default=v},"./src/utils/assert.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assert=void 0,t.assert=function(e,t){if(!e){var n=function(e){var t=new Error(e);return t.name="AssertionError",t}(t);throw console.error(n),n}}},"./src/utils/dataAttributes.ts":function(e,t,n){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.getHighlightedElementFromEventPath=t.getDataAttributesFromEventPath=t.dataToDatasetAttributeName=t.DataAttribute=void 0,t.DataAttribute={ElementCodename:"data-kontent-element-codename",ComponentId:"data-kontent-component-id",ItemId:"data-kontent-item-id",LanguageCodename:"data-kontent-language-codename",ProjectId:"data-kontent-project-id"};var i=[t.DataAttribute.ProjectId,t.DataAttribute.LanguageCodename,t.DataAttribute.ItemId,t.DataAttribute.ComponentId,t.DataAttribute.ElementCodename],o=i.slice().reverse(),a=[t.DataAttribute.ComponentId];function l(e){var t=i.indexOf(e);return i.slice(0,t)}function s(e){return e.replace(/^data-/,"").replace(/-./g,function(e){return e.toUpperCase()[1]})}t.dataToDatasetAttributeName=s,t.getDataAttributesFromEventPath=function(e){var t,n,i,d,u,c,m=e.composedPath(),f=new Map;try{for(var v=r(m),h=v.next();!h.done;h=v.next()){var g=h.value;if(g instanceof HTMLElement)try{for(var y=(i=void 0,r(o)),p=y.next();!p.done;p=y.next()){var b=p.value,E=s(b),w=g.dataset[E],C=a.includes(b);if(w&&!f.has(b)){var L=l(b);if(L.some(function(e){return f.has(e)})){if(C)continue;try{for(var P=(u=void 0,r(L)),k=P.next();!k.done;k=P.next()){var I=k.value;f.delete(I)}}catch(e){u={error:e}}finally{try{k&&!k.done&&(c=P.return)&&c.call(P)}finally{if(u)throw u.error}}}f.set(b,w)}}}catch(e){i={error:e}}finally{try{p&&!p.done&&(d=y.return)&&d.call(y)}finally{if(i)throw i.error}}}}catch(e){t={error:e}}finally{try{h&&!h.done&&(n=v.return)&&n.call(v)}finally{if(t)throw t.error}}return f},t.getHighlightedElementFromEventPath=function(e){var n,r=s(t.DataAttribute.ElementCodename);return null!==(n=e.composedPath().find(function(e){return e instanceof HTMLElement&&e.dataset[r]}))&&void 0!==n?n:null}},"./src/utils/iframe.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isInsideIFrame=void 0,t.isInsideIFrame=function(){return window.self!==window.top}},"./src/utils/link.ts":function(e,t,n){"use strict";function r(e,t,n){return"https://app.kontent.ai/goto/edit-item/project/"+e+"/variant-codename/"+t+"/item/"+n}function i(e,t,n,i){return r(e,t,n)+"/element/"+i}function o(e,t,n,i,o){return r(e,t,n)+"/component/"+i+"/element/"+o}Object.defineProperty(t,"__esModule",{value:!0}),t.buildKontentLink=t.buildComponentElementLink=t.buildElementLink=void 0,t.buildElementLink=i,t.buildComponentElementLink=o,t.buildKontentLink=function(e){return e.contentComponentId?o(e.projectId,e.languageCodename,e.itemId,e.contentComponentId,e.elementCodename):i(e.projectId,e.languageCodename,e.itemId,e.elementCodename)}},"./src/utils/node.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTotalScrollOffset=t.getParentForHighlight=void 0,t.getParentForHighlight=function e(t){var n=t.parentNode;if(n instanceof HTMLElement){var r=window.getComputedStyle(n),i={isPositioned:"static"!==r.getPropertyValue("position"),isContentClipped:r.getPropertyValue("overflow").split(" ").some(function(e){return["auto","scroll","clip","hidden"].includes(e)})},o=!["TD","TH","TABLE"].includes(n.tagName);return i.isPositioned||i.isContentClipped&&o?[n,i]:e(n)}return[null,null]},t.getTotalScrollOffset=function(e){if(!e)return[0,0];var t=e.offsetParent;if(!t)return[0,0];for(var n=0,r=0,i=e;i.parentElement&&(i=i.parentElement,!t||!t.isSameNode(i));)n+=i.scrollTop,r+=i.scrollLeft;return[n,r]}},"./src/utils/query.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isQueryParamPresent=void 0,t.isQueryParamPresent=function(e){return new RegExp("[?&]"+e+"([=&]|$)","i").test(window.location.search)}},"./src/utils/storage.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createStorage=void 0,t.createStorage=function(e){return{get:function(){var t=window.localStorage.getItem(e);return t?JSON.parse(t):null},set:function(t){var n=JSON.stringify(t);window.localStorage.setItem(e,n)},remove:function(){window.localStorage.removeItem(e)}}}},"./src/utils/validation.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateElementClickMessageData=void 0,t.validateElementClickMessageData=function(e){var t=[];return e.projectId||t.push("Warning: project ID is required to handle element click."),e.languageCodename||t.push("Warning: language codename is required to handle element click."),e.itemId||t.push("Warning: item ID is required to handle element click."),e.elementCodename||t.push("Warning: element codename is required to handle element click."),t.forEach(function(e){console.error(e)}),0===t.length}}}).default});